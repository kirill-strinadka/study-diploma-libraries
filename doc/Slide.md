
---

### Класс `Slide`

#### Описание
`Slide` — это базовый абстрактный класс в полиморфной библиотеке для работы с динамическими слайдами. Он предоставляет общий интерфейс и базовую функциональность для всех типов слайдов (например, растровых, видео, текстовых), которые наследуются от него. Этот класс не предназначен для прямого использования — вместо этого он служит основой для создания конкретных реализаций слайдов, обеспечивая единообразие их поведения и взаимодействия с системой управления интерфейсом (`UIManager`).

Класс реализует механизмы записи и воспроизведения команд, управления контейнером и базовыми настройками, а также определяет абстрактные методы, которые должны быть переопределены в подклассах для реализации специфической логики.

`command` (Array) — массив `[timeInterval, action, options]`

#### Назначение
- **Унификация**: Обеспечивает единый интерфейс для всех типов слайдов, упрощая их интеграцию в библиотеку.
- **Полиморфизм**: Позволяет подклассам переопределять методы для реализации уникального поведения, сохраняя общую структуру.
- **Управление командами**: Поддерживает запись и воспроизведение действий пользователя, что полезно для интерактивных или обучающих приложений.
- **Гибкость**: Служит основой для динамической подгрузки слайдов из различных источников.

#### Конструктор
```javascript
constructor(container, uiManager, settings = {})
```
- **Параметры:**
    - `container` (HTMLElement): DOM-элемент, в котором будет отображаться слайд.
    - `uiManager` (UIManager): Экземпляр менеджера интерфейса для взаимодействия с UI и инструментами.
    - `settings` (Object, опционально): Настройки слайда, такие как размеры (`width`, `height`) и другие параметры. По умолчанию: `{ width: 600, height: 400 }`.

#### Свойства
- `container` (HTMLElement): Контейнер, в котором рендерится слайд.
- `type` (string): Тип слайда (по умолчанию `'abstract'`). Должен быть переопределен в подклассах (например, `'raster'`, `'video'`).
- `settings` (Object): Объект настроек слайда, включая ширину и высоту.
- `commands` (Array): Массив команд для записи и воспроизведения действий пользователя. Каждая команда — это массив `[timeInterval, action, options]`.
- `uiManager` (UIManager): Ссылка на менеджер интерфейса для управления UI.
- `toolManager` (ToolManager): Ссылка на менеджер инструментов, полученный из `uiManager`.
- `currentTimeout` (number|null): Идентификатор текущего таймера для воспроизведения команд.
- `recording` (boolean): Флаг, указывающий, идет ли запись команд.
- `startTime` (number|null): Время начала записи в миллисекундах.

#### Методы

##### `getCreationArgs()`
- **Описание**: Абстрактный метод для получения аргументов, необходимых для пересоздания слайда. Должен быть переопределен в подклассах.
- **Возвращает**: Массив аргументов (например, `[backgroundImage]` для растрового слайда).
- **Выбрасывает**: `Error`, если не реализован в подклассе.

##### `clearContainer()`
- **Описание**: Очищает содержимое контейнера слайда в графическом интерфейса.
- **Использование**: Подготовка контейнера перед рендерингом нового содержимого.

##### `createTools(toolManager)`
- **Описание**: Абстрактный метод для создания инструментов, специфичных для данного типа слайда. Вызывается с менеджером инструментов (`toolManager`). 
Каждый тип слайда может реализовывать свои инструменты по взаимодействию со слайдом.
- **Параметры**: `toolManager` (ToolManager) — объект для управления инструментами UI.
- **Выбрасывает**: `Error`, если не реализован в подклассе.

##### `render()`
- **Описание**: Абстрактный метод для отрисовки содержимого слайда в контейнере. Должен быть переопределен в подклассах.
- **Выбрасывает**: `Error`, если не реализован в подклассе.

##### `startRecording()`
- **Описание**: Запускает запись команд пользователя. Устанавливает флаг `recording` в `true`, фиксирует время начала записи (`startTime`) и очищает массив `commands`.

- **Использование**: Вызывается перед началом записи действий.

##### `stopRecording()`
- **Описание**: Останавливает запись команд, сбрасывая флаг `recording` и `startTime`.

##### `play()`
- **Описание**: Воспроизводит записанные команды с учетом временных интервалов между ними. Использует таймеры для последовательного выполнения команд.
- **Логика**:
    - Выполняет команды из массива `commands`.
    - Вызывает `_executeCommand` для каждой команды.

##### `_prepareCommandAndExecute(action, options)`
- **Описание**: Подготавливает и выполняет команду, добавляя её в массив `commands`, если запись активна. Вызывает `_executeCommand` для немедленного выполнения.
Выполнение команды необходимо, чтобы пользователь видел результат своих действий.
- **Параметры**:
    - `action` (string): Тип действия (например, `'draw'` или `'move'`).
    - `options` (Object): Параметры действия.
- **Примечание**: Работает только во время записи (`recording === true`).

##### `_executeCommand(command)`
- **Описание**: Абстрактный метод для выполнения конкретной команды. Должен быть переопределен в подклассах.
- **Параметры**: `command` (Array) — массив `[timeInterval, action, options]`.
- **Выбрасывает**: `Error`, если не реализован в подклассе.

##### `getCommands()`
- **Описание**: Возвращает массив записанных команд.
- **Возвращает**: `Array` — текущий массив `commands`.

#### Примечания
- Этот класс является абстрактным и не предназначен для создания экземпляров напрямую. Все подклассы должны переопределять методы `getCreationArgs`, `createTools`, `render` и `_executeCommand`.
- Библиотека использует полиморфизм, позволяя подключать различные реализации слайдов (например, из разных репозиториев) через динамическую подгрузку модулей.
- Подходит для систем, где требуется запись и воспроизведение действий пользователя, например, в обучающих или презентационных приложениях.

#### Пример использования
```javascript
class RasterGraphicsSlide extends Slide {
    constructor(container, uiManager, backgroundImage) {
        super(container, uiManager);
        this.type = 'raster';
        this.backgroundImage = backgroundImage;
    }

    getCreationArgs() {
        return [this.backgroundImage];
    }

    createTools(toolManager) {
        toolManager.addTool('brush', () => console.log('Brush tool'));
    }

    render() {
        this.container.innerHTML = `<img src="${this.backgroundImage}" />`;
    }

    _executeCommand(command) {
        const [, action, options] = command;
        console.log(`Executing ${action} with`, options);
    }
}
```

---
